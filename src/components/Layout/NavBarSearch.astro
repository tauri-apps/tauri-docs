---
import Search from '../Search/index.jsx'
import 'meilisearch-docsearch/css/variables'
import 'meilisearch-docsearch/css/modal'
import { astroI18n } from 'astro-i18n'
---

<style is:global>
  /* Button */
  .docsearch-btn {
    @apply p-3 rounded min-h-[48px] min-w-[48px] transition lg:bg-base-200 hover:bg-content-hover shadow-none flex items-center justify-center gap-2 text-base-content/75 hover:text-primary !important;
  }

  .docsearch-btn-icon-container {
    @apply flex;
  }
  .docsearch-modal-btn-icon {
    @apply hidden;
  }

  .docsearch-btn-icon-container::after {
    @apply inline-block transition h-4 w-4 max-lg:bg-base-content lg:bg-base-content/75;
    content: '';
    mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>');
  }
  .docsearch-btn-placeholder {
    @apply hidden lg:block;
  }
  .docsearch-btn:hover .docsearch-btn-icon-container::after {
    @apply bg-primary;
  }
  .docsearch-btn-keys {
    @apply hidden xl:flex lg:pl-8 gap-1;
  }

  /* Modal */
  :root {
    --docsearch-primary-color: rgb(var(--color-primary)) !important;
    --docsearch-searchbox-focus-background: rgb(
      var(--color-base-200)
    ) !important;
    --docsearch-searchbox-shadow: none !important;
    --docsearch-modal-background: rgb(var(--color-base-300)) !important;
    --docsearch-hit-background: rgb(var(--color-base-200)) !important;
    --docsearch-footer-background: rgb(var(--color-base-200)) !important;
    --docsearch-key-gradient: rgb(var(--color-base-100)) !important;
    --docsearch-key-shadow: inset 0 -2px 0 0 rgb(var(--color-base-300)) !important;
  }

  .docsearch-modal-search-hits-item--active {
    @apply bg-base-100;
  }
  .docsearch-modal-search-input-icon {
    @apply text-base-content !important;
  }
  .docsearch-modal-title {
    @apply text-base-content !important;
  }
</style>

<Search client:only lang={astroI18n.langCode} />
